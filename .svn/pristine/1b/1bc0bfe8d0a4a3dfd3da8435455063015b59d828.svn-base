<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.paic.pawj.prize.dao.LotteryPrizeMapper">
	<!--查询获奖信息  -->
	<select id="queryLotteryPrizeList" parameterType="com.paic.pawj.prize.dto.LotteryPrize"
	    resultType="com.paic.pawj.prize.dto.LotteryPrize">
	    SELECT
		t.prize_id as prizeId,
  		t.prize_name as prizeName,
  		t.start_time  as startTime,
  		t.end_time as endTime,
  		t.vote_num as voteNum,
  		t.winner_num as winnerNum,
		CASE t.status1
		WHEN 1 THEN
		'正常'
		WHEN 2 THEN
		'已完成'
		WHEN 3 THEN
		'弃用'
		END status,
		t.`level` level
		FROM
		lottery_prize t
		limit #{start},#{pageSize}
	</select>

	<!--查询获奖信息总条数  -->
	<select id="queryLotteryPrizeCount" parameterType="com.paic.pawj.prize.dto.LotteryPrize"
	    resultType="int">
	    SELECT
		count(1)
		FROM
		lottery_prize t
	</select>
	
	<!--修改获奖信息  -->
	<update id="updateLotteryPrize" parameterType="com.paic.pawj.prize.dto.LotteryPrize">
	    UPDATE lottery_prize t
		SET t.prize_name = #{prizeName},
 		t.start_time = #{startTime},
 		t.end_time = #{endTime},
 		t.vote_num = #{voteNum},
 		t.winner_num = #{winnerNum},
 		t.status1 = #{status},
 		t.`level` = #{level}
		WHERE
		t.prize_id = #{prizeId}
	</update>
	
	<!--添加获奖信息  -->
	<insert id="addLotteryPrized" parameterType="com.paic.pawj.prize.dto.LotteryPrize">
	   INSERT INTO lottery_prize (
		prize_id,
		prize_name,
		start_time,
		end_time,
		vote_num,
		winner_num,
		status1,
		LEVEL
		)
		VALUES
		(
		#{prizeId},
		#{prizeName},
		#{startTime},
		#{endTime},
		#{voteNum},
		#{winnerNum},
		#{status},
		#{level}
		) 
	</insert>
	
	<delete id="deleteLotteryPrized" parameterType="int">
	    DELETE from lottery_prize  where prize_id = #{prizeId} 
	    
	</delete>
	
	<select id="havePrizeId" parameterType="com.paic.pawj.prize.dto.LotteryPrize"
	    resultType="int">
	    SELECT
		count(1)
		FROM
		lottery_prize t
		where prize_id = #{prizeId} 
	</select>
</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.paic.pluto.dao.UserInfoDao">
	
	<insert id="insertUserInfo" useGeneratedKeys="true" keyProperty="dbid" parameterType="com.paic.pluto.pojo.UserInfo">  
		insert into pluto_user_info(open_id,phone_no,show_name)
		values(#{openId},#{phoneNo},#{showName}) 
	</insert>
	
	
	<resultMap type="com.paic.pluto.pojo.UserInfo" id="userInfoMap">
		<id column="dbid" property="dbid"/>
		<result column="open_id" property="openId"/>
		<result column="photo_no" property="photoNo"/>
		<result column="show_name" property="showName"/>
		<result column="type" property="type"/>
	</resultMap>
	

	<select id="getUserInfoByOpenId" resultMap="userInfoMap">
		SELECT t.dbid,t.open_id openId,t.phone_no phoneNo,t.show_name showName,t.type 
		FROM pluto_user_info t 
		WHERE t.open_id = #{0}
	</select>
	
	
	<update id="updateUserInfo" parameterType="com.paic.pluto.pojo.UserInfo">  
	 	UPDATE pluto_user_info t 
        SET phone_no= #{phoneNo},show_name= #{showName}
        WHERE t.open_id = #{openId}
	</update> 

</mapper>